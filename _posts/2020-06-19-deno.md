---

author_profile: true
comments: false
classes: wide
tags:
- Deno
- Node.JS
categories:
- Desarrollo en Nube
header:
  teaser: /assets/images/blog/deno.webp
  overlay_image: /assets/images/blog/deno.webp
  overlay_filter: 0.2
  image_description: 'El sustituto de NodeJS: Un tiempo de ejecuci√≥n seguro de JavaScript y TypeScript.'
  image_alt: 'El sustituto de NodeJS: Un tiempo de ejecuci√≥n seguro de JavaScript y TypeScript.'
title: '‚ñ∑ Deno, una fuerte competencia para Node JS'
description: >-
  El futuro sustituto de NodeJS: Un tiempo de ejecuci√≥n seguro de JavaScript y TypeScript.
excerpt: >-
  El futuro sustituto de NodeJS: Un tiempo de ejecuci√≥n seguro de JavaScript y TypeScript.
canonical_URL: https://ciberninjas.com/deno-1/
permalink: /deno-1/
date: 2020-06-19 13:32:32
last_modified_at: 
published: true

---

Los lenguajes din√°micos son herramientas √∫tiles. La creaci√≥n de secuencias de comandos permite a los usuarios vincular r√°pida y sucintamente sistemas complejos y expresar ideas sin preocuparse por detalles como la administraci√≥n de memoria o los sistemas de compilaci√≥n.

En los √∫ltimos a√±os, los lenguajes de programaci√≥n como Rust and Go han facilitado mucho la producci√≥n de sofisticados c√≥digos de m√°quina nativos.

Estos proyectos son desarrollos incre√≠blemente importantes en infraestructura inform√°tica. Sin embargo, afirmamos que todav√≠a es importante tener un entorno de secuencias de comandos potente que pueda abordar una amplia gama de dominios problem√°ticos.

JavaScript es el lenguaje din√°mico m√°s utilizado, opera en todos los dispositivos con un navegador web. Un gran n√∫mero de programadores tienen fluidez en JavaScript y se ha hecho un gran esfuerzo para optimizar su ejecuci√≥n.

A trav√©s de organizaciones de est√°ndares como ECMA International, el lenguaje se ha mejorado cuidadosa y continuamente. Creemos que JavaScript es la opci√≥n natural para las herramientas de lenguaje din√°mico; ya sea en un entorno de navegador o como procesos independientes.

Nuestra empresa original en esta √°rea, Node.js, demostr√≥ ser una plataforma de software muy exitosa. Las personas lo han encontrado √∫til para construir herramientas de desarrollo web, construir servidores web independientes y para una mir√≠ada de otros casos de uso.

Nodo, sin embargo, fue dise√±ado en 2009 cuando JavaScript era un lenguaje muy diferente. Por necesidad, Node tuvo que inventar conceptos que luego fueron adoptados por las organizaciones de est√°ndares y agregados al lenguaje de manera diferente. En la presentaci√≥n Design Mistakes in Node , esto se discute con m√°s detalle. Debido a la gran cantidad de usuarios que tiene Node, es dif√≠cil y lento evolucionar el sistema.

Con el cambio del lenguaje JavaScript y las nuevas incorporaciones como TypeScript, la creaci√≥n de proyectos Node puede convertirse en un esfuerzo arduo, que implica la gesti√≥n de sistemas de compilaci√≥n y otras herramientas pesadas que le quitan la diversi√≥n a las secuencias de comandos de lenguaje din√°mico.

Adem√°s, el mecanismo para vincular a bibliotecas externas est√° fundamentalmente centralizado a trav√©s del repositorio de NPM, que no est√° en l√≠nea con los ideales de la web.

Creemos que el panorama de JavaScript y la infraestructura de software circundante ha cambiado lo suficiente como para que valiera la pena simplificarlo. Buscamos un entorno de scripting divertido y productivo que se pueda utilizar para una amplia gama de tareas.

[üéÅ Visita Nuestra Tienda üéÅ](https://www.amazon.es/shop/cibercursos){: .btn .btn--warning .btn--large .align-center}{:target="_blank" rel="nofollow,noreferrer"}
- [**Un navegador web para scripts de l√≠nea de comandos**](#un-navegador-web-para-scripts-de-l√≠nea-de-comandos)
- [**Deno m√°s TypeScript de primera clase**](#deno-m√°s-typescript-de-primera-clase)
- [**Objeto Promises y Deno**](#objeto-promises-y-deno)
- [**API de Rust de Deno**](#api-de-rust-de-deno)
- [**Estabilidad de Deno**](#estabilidad-de-deno)
- [**Limitaciones de Deno**](#limitaciones-de-deno)
- [**Compatibilidad de Deno**](#compatibilidad-de-deno)
- [**Rendimiento del servidor HTTP de Deno**](#rendimiento-del-servidor-http-de-deno)
- [**Los cuellos de botella TSC en Deno**](#los-cuellos-de-botella-tsc-en-deno)
- [**Los complementos / extensiones de Deno**](#los-complementos--extensiones-de-deno)

## **Un navegador web para scripts de l√≠nea de comandos**

Deno es un nuevo tiempo de ejecuci√≥n para ejecutar JavaScript y TypeScript fuera del navegador web.

Deno intenta proporcionar una herramienta independiente para crear r√°pidamente secuencias de comandos de funcionalidad compleja.

Deno es (y siempre ser√°) un √∫nico archivo ejecutable. Al igual que un navegador web, sabe c√≥mo obtener c√≥digo externo. En Deno, un solo archivo puede definir un comportamiento complejo arbitrario sin ninguna otra herramienta.

```
import { serve } from "https://deno.land/std@0.50.0/http/server.ts";

for await (const req of serve({ port: 8000 })) {
  req.respond({ body: "Hello World\n" });
}
```

Aqu√≠ se agrega un m√≥dulo de servidor HTTP completo como una dependencia en una sola l√≠nea. No hay archivos de configuraci√≥n adicionales, no hay instalaci√≥n que hacer de antemano, solo `deno run example.js`.

Tambi√©n como los navegadores, el c√≥digo se ejecuta en un entorno seguro por defecto. Las secuencias de comandos no pueden acceder al disco duro, abrir conexiones de red o realizar otras acciones potencialmente maliciosas sin permiso.

El navegador proporciona API para acceder a c√°maras y micr√≥fonos, pero los usuarios primero deben dar permiso. Deno proporciona un comportamiento an√°logo en la terminal. El ejemplo anterior fallar√° a menos que `--allow-net` se proporcione el indicador de l√≠nea de comando.

Deno tiene cuidado de no desviarse de las API JavaScript estandarizadas del navegador. Por supuesto, no todas las API de navegador son relevantes para Deno, pero donde est√°n, Deno no se desv√≠a del est√°ndar.

## **Deno m√°s TypeScript de primera clase**

Queremos que Deno sea aplicable a una amplia gama de dominios problem√°ticos: desde peque√±os scripts de una l√≠nea hasta complejas l√≥gicas comerciales del lado del servidor.

A medida que los programas se vuelven m√°s complejos, tener alguna forma de verificaci√≥n de tipo se vuelve cada vez m√°s importante. TypeScript es una extensi√≥n del lenguaje JavaScript que permite a los usuarios proporcionar opcionalmente informaci√≥n de tipo.

Deno admite TypeScript sin herramientas adicionales. El tiempo de ejecuci√≥n est√° dise√±ado con TypeScript en mente. El deno typescomando proporciona declaraciones de tipo para todo lo proporcionado por Deno. Todos los m√≥dulos est√°ndar de Deno est√°n escritos en TypeScript.

## **Objeto Promises y Deno**

Node fue dise√±ado antes de que JavaScript tuviera el concepto de Promesas o async / wait. La contraparte de las promesas de Node fue EventEmitter, que se basa en API importantes, a saber, sockets y HTTP. Dejando de lado los beneficios ergon√≥micos de async / wait, el patr√≥n EventEmitter tiene un problema con la contrapresi√≥n.

Tome un socket TCP, por ejemplo.

El socket emitir√≠a eventos de "datos" cuando recibiera paquetes entrantes. Estas devoluciones de llamada de "datos" se emitir√≠an sin restricciones, inundando el proceso con eventos. Debido a que Node contin√∫a recibiendo nuevos eventos de datos, el socket TCP subyacente no tiene una contrapresi√≥n adecuada, el remitente remoto no tiene idea de que el servidor est√° sobrecargado y contin√∫a enviando datos.

Para mitigar este problema, se agreg√≥ un m√©todo `pause()`. Esto podr√≠a resolver el problema, pero requer√≠a c√≥digo adicional; y dado que el problema de la inundaci√≥n solo se presenta cuando el proceso est√° muy ocupado, muchos programas Node pueden inundarse de datos. El resultado es un sistema con mala latencia de cola.

En Deno, los sockets siguen siendo as√≠ncronos, pero recibir nuevos datos requiere que los usuarios lo hagan expl√≠citamente read(). No es necesaria una sem√°ntica de pausa adicional para estructurar adecuadamente un socket receptor. Esto no es exclusivo de los sockets TCP. La capa de enlace de nivel m√°s bajo para el sistema est√° fundamentalmente vinculada a las promesas: llamamos a estos enlaces "ops". Todas las devoluciones de llamada en Deno de una forma u otra surgen de promesas.

Rust tiene su propia abstracci√≥n prometedora, llamada Futures. A trav√©s de la abstracci√≥n "op", Deno facilita la vinculaci√≥n de las API basadas en el futuro de Rust a las promesas de JavaScript.

[üéÅ Visita Nuestra Tienda üéÅ](https://www.amazon.es/shop/cibercursos){: .btn .btn--warning .btn--large .align-center}{:target="_blank" rel="nofollow,noreferrer"}

## **API de Rust de Deno**

El componente principal que enviamos es la interfaz de l√≠nea de comandos (CLI) de Deno. La CLI es lo que es la versi√≥n 1.0 hoy. Pero Deno no es un programa monol√≠tico, sino que est√° dise√±ado como una colecci√≥n de cajas Rust para permitir la integraci√≥n en diferentes capas.

La caja deno_core es una versi√≥n muy b√°sica de Deno. No tiene dependencias en TypeScript ni en Tokio . Simplemente proporciona nuestra infraestructura de operaciones y recursos. Es decir, proporciona una forma organizada de vincular los futuros de Rust a las promesas de JavaScript. La CLI, por supuesto, est√° construida completamente sobre deno_core.

La caja rusty_v8 proporciona enlaces Rust de alta calidad a la API C ++ de V8. La API intenta hacer coincidir la API original de C ++ lo m√°s cerca posible. Es un enlace de costo cero: los objetos que est√°n expuestos en Rust son exactamente el objeto que manipulas en C ++. (Los intentos anteriores en los enlaces Rust V8 forzaron el uso de controladores persistentes, por ejemplo).

La caja proporciona binarios que se crean en Github Actions CI, pero tambi√©n permite a los usuarios compilar V8 desde cero y ajustar sus muchas configuraciones de construcci√≥n. Todo el c√≥digo fuente V8 se distribuye en la caja misma. Finalmente, rusty_v8 intenta ser una interfaz segura. Todav√≠a no es 100% seguro, pero nos estamos acercando. Poder interactuar con una VM tan compleja como V8 de manera segura es bastante sorprendente y nos ha permitido descubrir muchos errores dif√≠ciles en Deno.

## **Estabilidad de Deno**

Prometemos mantener una API estable en Deno. Deno tiene muchas interfaces y componentes, por lo que es importante ser transparente sobre lo que queremos decir con "estable". Las API de JavaScript que hemos inventado para interactuar con el sistema operativo se encuentran dentro del espacio de nombres "Deno" (por ejemplo Deno.open()). Estos han sido cuidadosamente examinados y no haremos cambios hacia atr√°s incompatibles con ellos.

Toda la funcionalidad que a√∫n no est√° lista para la estabilizaci√≥n se ha ocultado detr√°s del --unstableindicador de l√≠nea de comando. Puede ver la documentaci√≥n de las interfaces inestables aqu√≠ . En versiones posteriores, algunas de estas API tambi√©n se estabilizar√°n.

En el espacio de nombres global encontrar√° todo tipo de otros objetos (por ejemplo, `setTimeout()` y `fetch()`). Hemos tratado muy duro para mantener estas interfaces id√©nticas a las del navegador; pero emitiremos correcciones si descubrimos incompatibilidades inadvertidas. Los est√°ndares del navegador definen estas interfaces, no nosotros. Las correcciones emitidas por nosotros son correcciones de errores, no cambios en la interfaz. Si hay una incompatibilidad con una API est√°ndar del navegador, esa incompatibilidad puede corregirse antes de una versi√≥n principal.

Deno tambi√©n tiene muchas API de Rust, a saber, las cajas deno_core y rusty_v8. Ninguna de estas API est√° en 1.0 todav√≠a. Continuaremos iterando sobre ellos.

## **Limitaciones de Deno**

Es importante comprender que Deno no es una bifurcaci√≥n de Node, es una implementaci√≥n completamente nueva. Deno ha estado en desarrollo durante solo dos a√±os, mientras que Node ha estado en desarrollo durante m√°s de una d√©cada. Dada la cantidad de inter√©s en Deno, esperamos que contin√∫e evolucionando y madurando.

Para algunas aplicaciones, Deno puede ser una buena opci√≥n hoy, para otras todav√≠a no. Depender√° de los requisitos. Queremos ser transparentes acerca de estas limitaciones para ayudar a las personas a tomar decisiones informadas cuando consideren usar Deno.

## **Compatibilidad de Deno**

Desafortunadamente, muchos usuarios encontrar√°n una frustrante falta de compatibilidad con las herramientas JavaScript existentes. Deno no es compatible, en general, con los paquetes Node (NPM). Se est√° creando una capa de compatibilidad naciente en https://deno.land/std/node/ pero est√° lejos de completarse.

Aunque Deno ha adoptado un enfoque de l√≠nea dura para simplificar el sistema de m√≥dulos, en √∫ltima instancia, Deno y Node son sistemas bastante similares con objetivos similares. Con el tiempo, esperamos que Deno pueda ejecutar m√°s y m√°s programas Node listos para usar.

[üéÅ Visita Nuestra Tienda üéÅ](https://www.amazon.es/shop/cibercursos){: .btn .btn--warning .btn--large .align-center}{:target="_blank" rel="nofollow,noreferrer"}

## **Rendimiento del servidor HTTP de Deno**

Seguimos continuamente el rendimiento del servidor HTTP de Deno. Un servidor HTTP Deno-hello-world realiza aproximadamente 25k solicitudes por segundo con una latencia m√°xima de 1.3 milisegundos. Un programa Node comparable realiza 34k solicitudes por segundo con una latencia m√°xima bastante err√°tica entre 2 y 300 milisegundos.

El servidor HTTP de Deno se implementa en TypeScript sobre los sockets TCP nativos. El servidor HTTP de Node est√° escrito en C y expuesto como enlaces de alto nivel a JavaScript. Hemos resistido la necesidad de agregar enlaces de servidores HTTP nativos a Deno, porque queremos optimizar la capa de socket TCP y, en general, la interfaz operativa.

Deno es un servidor as√≠ncrono adecuado y 25k solicitudes por segundo son suficientes para la mayor√≠a de los prop√≥sitos. (Si no lo es, probablemente JavaScript no sea la mejor opci√≥n). Adem√°s, esperamos que Deno exhiba generalmente una mejor latencia de cola debido al uso ubicuo de las promesas (discutido anteriormente). Dicho todo esto, creemos que hay m√°s victorias de rendimiento en el sistema, y ‚Äã‚Äãesperamos lograrlo en futuras versiones.

## **Los cuellos de botella TSC en Deno**

Internamente, Deno utiliza el compilador TypeScript de Microsoft para verificar los tipos y producir JavaScript. En comparaci√≥n con el tiempo que tarda V8 en analizar JavaScript, es muy lento. Al principio del proyecto, esper√°bamos que las "instant√°neas V8" proporcionaran mejoras significativas aqu√≠. Las instant√°neas ciertamente han ayudado, pero todav√≠a es insatisfactoriamente lento. Ciertamente creemos que hay mejoras que se pueden hacer aqu√≠ adem√°s del compilador TypeScript existente, pero tenemos claro que, en √∫ltima instancia, la verificaci√≥n de tipo debe implementarse en Rust. Esta ser√° una empresa masiva y no suceder√° en el corto plazo; pero proporcionar√≠a mejoras en el orden de magnitud del rendimiento en una ruta cr√≠tica experimentada por los desarrolladores. TSC debe ser portado a Rust. Si est√° interesado en colaborar en este problema, p√≥ngase en contacto.

## **Los complementos / extensiones de Deno**

Tenemos un nuevo sistema de complementos para extender el tiempo de ejecuci√≥n de Deno con operaciones personalizadas. Sin embargo, esta interfaz todav√≠a est√° en desarrollo y se ha marcado como inestable. Por lo tanto, acceder a sistemas nativos m√°s all√° de lo que proporciona Deno es dif√≠cil.

[‚ñ∂ Probar Deno](https://github.com/denoland/deno#deno){: .btn .btn--warning .btn--large .align-center}{:target="_blank" rel="nofollow,noreferrer"}

![El futuro sustituto de NodeJS: Un tiempo de ejecuci√≥n seguro de JavaScript y TypeScript.](https://ciberninjas.com/deno-1/ "El futuro sustituto de NodeJS: Un tiempo de ejecuci√≥n seguro de JavaScript y TypeScript.")

[üéÅ Visita Nuestra Tienda üéÅ](https://www.amazon.es/shop/cibercursos){: .btn .btn--warning .btn--large .align-center}{:target="_blank" rel="nofollow,noreferrer"}